{"ast":null,"code":"import axios from\"axios\";import{ENV}from\"./../../../ENV\";import{notification}from\"antd\";import{storage}from\"@shared/utils\";var headers={\"Content-Type\":\"application/json\",\"X-Request-ID\":124,\"X-Country-Code\":\"BD\",\"X-Client-Name\":\"CRM\",\"X-Client-Version\":123,Authorization:\"Bearer \".concat(storage===null||storage===void 0?void 0:storage.getToken())};export var CoreAxiosInstance=axios.create({baseURL:ENV.CORE_END_POINT,timeout:60000,headers:headers});CoreAxiosInstance.interceptors.request.use(function(config){config.headers[\"Authorization\"]=\"Bearer \".concat(storage===null||storage===void 0?void 0:storage.getToken());return config;},function(error){return Promise.reject(error);});CoreAxiosInstance.interceptors.response.use(function(response){var _response$data,_response$config;if(response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.success){switch(response===null||response===void 0?void 0:(_response$config=response.config)===null||_response$config===void 0?void 0:_response$config.method.toUpperCase()){case\"PUT\":notification.success({message:\"Update Success\",type:\"success\"});return response;case\"DELETE\":notification.success({message:\"Deleted Success\",type:\"success\"});return response;}}return response;},function(error){var _error$response,_error$response2,_error$response2$data;if((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){storage.clear();window.location.assign(window.location.origin);}else if(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.success)===false){var _error$response3,_error$response3$data,_error$response3$data2;(_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:(_error$response3$data2=_error$response3$data.errorMessages)===null||_error$response3$data2===void 0?void 0:_error$response3$data2.map(function(x){return notification.error({message:x,duration:100,type:\"error\"});});}return error;});","map":{"version":3,"sources":["/home/jobayer/Documents/@poshapets/poshapets-admin/src/@shared/config/axios/core-axios-instantance.ts"],"names":["axios","ENV","notification","storage","headers","Authorization","getToken","CoreAxiosInstance","create","baseURL","CORE_END_POINT","timeout","interceptors","request","use","config","error","Promise","reject","response","data","success","method","toUpperCase","message","type","status","clear","window","location","assign","origin","errorMessages","map","x","duration"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkC,OAAlC,CAEA,OAASC,GAAT,KAAoB,gBAApB,CACA,OAASC,YAAT,KAA6B,MAA7B,CACA,OAASC,OAAT,KAAwB,eAAxB,CAEA,GAAMC,CAAAA,OAAO,CAAG,CACf,eAAgB,kBADD,CAEf,eAAgB,GAFD,CAGf,iBAAkB,IAHH,CAIf,gBAAiB,KAJF,CAKf,mBAAoB,GALL,CAMfC,aAAa,kBAAYF,OAAZ,SAAYA,OAAZ,iBAAYA,OAAO,CAAEG,QAAT,EAAZ,CANE,CAAhB,CAQA,MAAO,IAAMC,CAAAA,iBAAiB,CAAGP,KAAK,CAACQ,MAAN,CAAa,CAC7CC,OAAO,CAAER,GAAG,CAACS,cADgC,CAE7CC,OAAO,CAAE,KAFoC,CAG7CP,OAAO,CAAPA,OAH6C,CAAb,CAA1B,CAKPG,iBAAiB,CAACK,YAAlB,CAA+BC,OAA/B,CAAuCC,GAAvC,CACC,SAACC,MAAD,CAAiB,CAChBA,MAAM,CAACX,OAAP,CAAe,eAAf,mBAA4CD,OAA5C,SAA4CA,OAA5C,iBAA4CA,OAAO,CAAEG,QAAT,EAA5C,EACA,MAAOS,CAAAA,MAAP,CACA,CAJF,CAKC,SAACC,KAAD,CAAgB,CACf,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP,CACA,CAPF,EASAT,iBAAiB,CAACK,YAAlB,CAA+BO,QAA/B,CAAwCL,GAAxC,CACC,SAACK,QAAD,CAAmB,qCAClB,GAAIA,QAAJ,SAAIA,QAAJ,iCAAIA,QAAQ,CAAEC,IAAd,yCAAI,eAAgBC,OAApB,CAA6B,CAC5B,OAAQF,QAAR,SAAQA,QAAR,mCAAQA,QAAQ,CAAEJ,MAAlB,2CAAQ,iBAAkBO,MAAlB,CAAyBC,WAAzB,EAAR,EACC,IAAK,KAAL,CACCrB,YAAY,CAACmB,OAAb,CAAqB,CACpBG,OAAO,CAAE,gBADW,CAEpBC,IAAI,CAAE,SAFc,CAArB,EAIA,MAAON,CAAAA,QAAP,CAED,IAAK,QAAL,CACCjB,YAAY,CAACmB,OAAb,CAAqB,CACpBG,OAAO,CAAE,iBADW,CAEpBC,IAAI,CAAE,SAFc,CAArB,EAIA,MAAON,CAAAA,QAAP,CAbF,CAeA,CACD,MAAOA,CAAAA,QAAP,CACA,CApBF,CAqBC,SAACH,KAAD,CAAuB,4DACtB,GAAI,CAAAA,KAAK,OAAL,EAAAA,KAAK,SAAL,yBAAAA,KAAK,CAAEG,QAAP,0DAAiBO,MAAjB,IAA4B,GAAhC,CAAqC,CACpCvB,OAAO,CAACwB,KAAR,GACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBF,MAAM,CAACC,QAAP,CAAgBE,MAAvC,EACA,CAHD,IAGO,IAAI,mBAAAf,KAAK,CAACG,QAAN,mFAAgBC,IAAhB,sEAAsBC,OAAtB,IAAkC,KAAtC,CAA6C,mEACnD,kBAAAL,KAAK,CAACG,QAAN,mFAAgBC,IAAhB,8FAAsBY,aAAtB,wEAAqCC,GAArC,CAAyC,SAACC,CAAD,CAAe,CACvD,MAAOhC,CAAAA,YAAY,CAACc,KAAb,CAAmB,CACzBQ,OAAO,CAAEU,CADgB,CAEzBC,QAAQ,CAAE,GAFe,CAGzBV,IAAI,CAAE,OAHmB,CAAnB,CAAP,CAKA,CAND,EAOA,CACD,MAAOT,CAAAA,KAAP,CACA,CAnCF","sourcesContent":["import axios, { AxiosError } from \"axios\"\n\nimport { ENV } from \"./../../../ENV\"\nimport { notification } from \"antd\"\nimport { storage } from \"@shared/utils\"\n\nconst headers = {\n\t\"Content-Type\": \"application/json\",\n\t\"X-Request-ID\": 124,\n\t\"X-Country-Code\": \"BD\",\n\t\"X-Client-Name\": \"CRM\",\n\t\"X-Client-Version\": 123,\n\tAuthorization: `Bearer ${storage?.getToken()}`,\n}\nexport const CoreAxiosInstance = axios.create({\n\tbaseURL: ENV.CORE_END_POINT,\n\ttimeout: 60000,\n\theaders,\n})\nCoreAxiosInstance.interceptors.request.use(\n\t(config: any) => {\n\t\tconfig.headers[\"Authorization\"] = `Bearer ${storage?.getToken()}`\n\t\treturn config\n\t},\n\t(error: any) => {\n\t\treturn Promise.reject(error)\n\t}\n)\nCoreAxiosInstance.interceptors.response.use(\n\t(response: any) => {\n\t\tif (response?.data?.success) {\n\t\t\tswitch (response?.config?.method.toUpperCase()) {\n\t\t\t\tcase \"PUT\":\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: \"Update Success\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t})\n\t\t\t\t\treturn response\n\n\t\t\t\tcase \"DELETE\":\n\t\t\t\t\tnotification.success({\n\t\t\t\t\t\tmessage: \"Deleted Success\",\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t})\n\t\t\t\t\treturn response\n\t\t\t}\n\t\t}\n\t\treturn response\n\t},\n\t(error: AxiosError) => {\n\t\tif (error?.response?.status === 401) {\n\t\t\tstorage.clear()\n\t\t\twindow.location.assign(window.location.origin as unknown as string)\n\t\t} else if (error.response?.data?.success === false) {\n\t\t\terror.response?.data?.errorMessages?.map((x: string) => {\n\t\t\t\treturn notification.error({\n\t\t\t\t\tmessage: x,\n\t\t\t\t\tduration: 100,\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\treturn error\n\t}\n)\n"]},"metadata":{},"sourceType":"module"}