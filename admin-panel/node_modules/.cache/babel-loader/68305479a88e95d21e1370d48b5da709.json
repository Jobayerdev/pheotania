{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { queryClient } from \"@shared/config\";\nimport { UsersService } from \"@shared/services\";\nimport { notification } from \"antd\";\nimport { useMutation } from \"react-query\";\nexport const useDeleteUser = ({\n  config\n} = {}) => {\n  _s();\n\n  return useMutation({\n    onMutate: async deletedUser => {\n      await queryClient.cancelQueries(\"userList\");\n      const previousUsers = queryClient.getQueryData(\"userList\");\n      queryClient.setQueryData(\"userList\", previousUsers === null || previousUsers === void 0 ? void 0 : previousUsers.filter(urs => urs.id !== deletedUser));\n      return {\n        previousUsers\n      };\n    },\n    onError: (_, __, context) => {\n      if (context === null || context === void 0 ? void 0 : context.previousUsers) {\n        queryClient.setQueryData(\"userList\", context.previousUsers);\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries(\"userList\");\n      notification.success({\n        type: \"success\",\n        message: \"User Deleted\"\n      });\n    },\n    ...config,\n    mutationFn: UsersService.delete\n  });\n};\n\n_s(useDeleteUser, \"wwwtpB20p0aLiHIvSy5P98MwIUg=\", false, function () {\n  return [useMutation];\n});","map":{"version":3,"sources":["/home/jobayer/Documents/@poshapets/poshapets-admin/src/@modules/users/hooks/useDeleteUser.ts"],"names":["queryClient","UsersService","notification","useMutation","useDeleteUser","config","onMutate","deletedUser","cancelQueries","previousUsers","getQueryData","setQueryData","filter","urs","id","onError","_","__","context","onSuccess","invalidateQueries","success","type","message","mutationFn","delete"],"mappings":";;AAAA,SAAyBA,WAAzB,QAA4C,gBAA5C;AAEA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,YAAT,QAA6B,MAA7B;AACA,SAASC,WAAT,QAA4B,aAA5B;AAMA,OAAO,MAAMC,aAAa,GAAG,CAAC;AAAEC,EAAAA;AAAF,IAAmC,EAApC,KAA2C;AAAA;;AACvE,SAAOF,WAAW,CAAC;AAClBG,IAAAA,QAAQ,EAAE,MAAOC,WAAP,IAA4B;AACrC,YAAMP,WAAW,CAACQ,aAAZ,CAA0B,UAA1B,CAAN;AAEA,YAAMC,aAAa,GAAGT,WAAW,CAACU,YAAZ,CAAgC,UAAhC,CAAtB;AACAV,MAAAA,WAAW,CAACW,YAAZ,CACC,UADD,EAECF,aAFD,aAECA,aAFD,uBAECA,aAAa,CAAEG,MAAf,CAAuBC,GAAD,IAASA,GAAG,CAACC,EAAJ,KAAWP,WAA1C,CAFD;AAKA,aAAO;AAAEE,QAAAA;AAAF,OAAP;AACA,KAXiB;AAYlBM,IAAAA,OAAO,EAAE,CAACC,CAAD,EAAIC,EAAJ,EAAQC,OAAR,KAAyB;AACjC,UAAIA,OAAJ,aAAIA,OAAJ,uBAAIA,OAAO,CAAET,aAAb,EAA4B;AAC3BT,QAAAA,WAAW,CAACW,YAAZ,CAAyB,UAAzB,EAAqCO,OAAO,CAACT,aAA7C;AACA;AACD,KAhBiB;AAiBlBU,IAAAA,SAAS,EAAE,MAAM;AAChBnB,MAAAA,WAAW,CAACoB,iBAAZ,CAA8B,UAA9B;AACAlB,MAAAA,YAAY,CAACmB,OAAb,CAAqB;AACpBC,QAAAA,IAAI,EAAE,SADc;AAEpBC,QAAAA,OAAO,EAAE;AAFW,OAArB;AAIA,KAvBiB;AAwBlB,OAAGlB,MAxBe;AAyBlBmB,IAAAA,UAAU,EAAEvB,YAAY,CAACwB;AAzBP,GAAD,CAAlB;AA2BA,CA5BM;;GAAMrB,a;UACLD,W","sourcesContent":["import { MutationConfig, queryClient } from \"@shared/config\"\n\nimport { UsersService } from \"@shared/services\"\nimport { notification } from \"antd\"\nimport { useMutation } from \"react-query\"\n\ntype UseDeleteUserOptions = {\n\tconfig?: MutationConfig<typeof UsersService.delete>\n}\n\nexport const useDeleteUser = ({ config }: UseDeleteUserOptions = {}) => {\n\treturn useMutation({\n\t\tonMutate: async (deletedUser: any) => {\n\t\t\tawait queryClient.cancelQueries(\"userList\")\n\n\t\t\tconst previousUsers = queryClient.getQueryData<any[]>(\"userList\")\n\t\t\tqueryClient.setQueryData(\n\t\t\t\t\"userList\",\n\t\t\t\tpreviousUsers?.filter((urs) => urs.id !== deletedUser)\n\t\t\t)\n\n\t\t\treturn { previousUsers }\n\t\t},\n\t\tonError: (_, __, context: any) => {\n\t\t\tif (context?.previousUsers) {\n\t\t\t\tqueryClient.setQueryData(\"userList\", context.previousUsers)\n\t\t\t}\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tqueryClient.invalidateQueries(\"userList\")\n\t\t\tnotification.success({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"User Deleted\",\n\t\t\t})\n\t\t},\n\t\t...config,\n\t\tmutationFn: UsersService.delete,\n\t})\n}\n"]},"metadata":{},"sourceType":"module"}